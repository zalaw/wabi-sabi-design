(function(){"use strict";var t={230:function(t,e,s){var i=s(8935),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"root"},[s("Navbar"),t.showLoginModal?s("LoginModal"):t._e(),s("NotificationToast"),s("router-view")],1)},n=[],o=s(6166),r=s.n(o),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navbar"},[s("div",{staticClass:"logo",on:{click:function(e){t.showMenu=!1}}},[s("router-link",{attrs:{to:"/"}},[s("p",[t._v("Wabi")]),s("p",[t._v("Sabi")]),s("p",[t._v("Design")])])],1),s("div",{staticClass:"menu",class:{active:t.showMenu},on:{click:function(e){t.showMenu=!1}}},[s("router-link",{attrs:{to:"/"}},[t._v("Home")]),s("router-link",{attrs:{to:"/projects"}},[t._v("Projects")]),s("router-link",{attrs:{to:"/testimonials"}},[t._v("Testimonials")]),t.loggedIn?s("div",{staticStyle:{display:"flex",gap:"2rem"}},[s("router-link",{attrs:{to:"/admin"}},[t._v("Admin")]),s("span",{on:{click:t.logout}},[t._v("Logout")])],1):s("span",{on:{click:t.showLoginModal}},[t._v("Login")])],1),s("div",{staticClass:"hamburger",class:{active:t.showMenu},on:{click:function(e){t.showMenu=!t.showMenu}}},[s("span",{staticClass:"bar"}),s("span",{staticClass:"bar"}),s("span",{staticClass:"bar"})])])},c=[],d={name:"NavbarComponent",data(){return{showMenu:!1}},methods:{showLoginModal(){this.$store.dispatch("setShowLoginModal",!0)},async logout(){try{const t=await r().get("/api/auth/logout");this.$store.dispatch("setLoggedIn",!1),this.$store.dispatch("setNotification",{isError:!1,text:t.data.message})}catch(t){this.$store.dispatch("setNotification",{isError:!0,text:t.response.data.error})}}},computed:{loggedIn(){return this.$store.getters.getLoggedIn}}},m=d,g=s(1001),p=(0,g.Z)(m,l,c,!1,null,"05b65b1f",null),u=p.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-container"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[s("i",{staticClass:"fas fa-times",on:{click:t.closeLoginModal}}),s("div",{staticClass:"input-row"},[s("label",{attrs:{for:"password"}},[t._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("div",{staticClass:"input-row submit-row"},[s("input",{class:{"button-disabled":t.buttonDisabled},attrs:{type:"submit"},domProps:{value:t.buttonMessage}})])])])},v=[],f={name:"LoginModalComponent",data(){return{buttonMessage:"Login",buttonDisabled:!1,password:""}},methods:{closeLoginModal(){this.$store.dispatch("setShowLoginModal",!1)},async login(){try{if(""===this.password||this.buttonDisabled)return;this.buttonMessage="Logging in...",this.buttonDisabled=!0;const t=await r().post("/api/auth/login",{password:this.password});this.$store.dispatch("setLoggedIn",!0),this.$store.dispatch("setNotification",{isError:!1,text:t.data.message}),this.closeLoginModal()}catch(t){console.log(t),this.$store.dispatch("setNotification",{isError:!0,text:t.response.data.message})}finally{this.buttonMessage="Login",this.buttonDisabled=!1}}}},_=f,C=(0,g.Z)(_,h,v,!1,null,"326706b8",null),w=C.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notification-toast",class:{"notification-error":t.notification.isError,active:""!==t.notification.text},domProps:{innerHTML:t._s(t.formatedText)}})},y=[],b={name:"NotificationToastComponent",watch:{notification:{handler(){setTimeout((()=>{this.$store.dispatch("setNotification",{isError:!1,text:""})}),this.getMinNotificationTime(120*parseInt(this.notification.text.length)))},deep:!0}},methods:{getMinNotificationTime(t){return t<2500?2500:t}},computed:{notification(){return this.$store.getters.getNotification},formatedText(){return this.notification.text.split("\n").map((t=>`<p>${t}</p>`)).join("")}}},k=b,j=(0,g.Z)(k,x,y,!1,null,"1bd2c6a4",null),S=j.exports,$={name:"App",components:{Navbar:u,LoginModal:w,NotificationToast:S},async mounted(){try{const t=await r().get("/api/public/logged-in");this.$store.dispatch("setLoggedIn",t.data.loggedIn)}catch(t){console.error(t)}},computed:{showLoginModal(){return this.$store.getters.getShowLoginModal}}},E=$,P=(0,g.Z)(E,a,n,!1,null,null,null),I=P.exports,N=s(2809),M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[-1!==t.imageSelectedIndex?s("FullScreenImage",{attrs:{images:t.images,index:t.imageSelectedIndex},on:{handleCloseFullScreenImage:function(e){t.imageSelectedIndex=-1}}}):t._e(),s("div",{staticClass:"main-container"},[s("div",{attrs:{id:"home"}}),t._m(0),s("section",{staticClass:"no-parallax steps-container"},[t._m(1),s("div",{staticClass:"container"},[s("h1",{staticClass:"section-heading"},[t._v("What we offer")]),s("div",{staticClass:"steps"},t._l(t.steps,(function(e,i){return s("div",{key:i,staticClass:"step"},[s("div",{staticClass:"step-content"},[s("i",{class:e.icon}),s("h1",[t._v(t._s(e.title))]),s("p",[t._v(t._s(e.description))])])])})),0),s("h1",{staticClass:"section-heading",staticStyle:{"margin-top":"4rem"}},[t._v("Our projects")]),0==t.images.length?s("div",[s("h1",{staticClass:"text-center"},[t._v("😭 There are no projects yet 😭")])]):t._e(),t.projects.length>0?s("div",{staticClass:"projects-container"},[s("div",{attrs:{id:"projects"}}),t._l(t.images,(function(e,i){return s("div",{key:i,staticClass:"project"},[s("div",{staticClass:"project-content"},[s("img",{attrs:{src:e},on:{click:function(e){t.imageSelectedIndex=i}}})])])}))],2):t._e(),t.projects.length>0?s("div",{staticClass:"button-container-center"},[s("router-link",{attrs:{to:"/projects"}},[t.images.length>0?s("Button",{attrs:{text:"Browse all projects"}}):t._e()],1)],1):t._e()])]),s("section",{staticClass:"parallax",attrs:{id:"parallax-secondary-image"}},[s("div",{staticClass:"container"},[s("h1",{staticClass:"section-heading"},[t._v("What our clients think")]),0==t.testimonials.length?s("div",[s("h1",{staticClass:"text-center"},[t._v("😭 There are no testimonials yet 😭")])]):t._e(),t.testimonials.length>0?s("div",{staticClass:"rating"},[s("div",{staticClass:"stars-outer"},[s("div",{staticClass:"stars-inner",style:"width: "+t.getRatingPercentage+"%;"})])]):t._e(),t.testimonials.length>0?s("div",{staticClass:"clients-container"},[s("div",{attrs:{id:"testimonials"}}),t._l(t.testimonials,(function(e,i){return s("div",{key:i,staticClass:"client text-center"},[s("p",{staticClass:"client-text"},[t._v('"'+t._s(e.body)+'"')]),s("p",{staticClass:"client-name"},[t._v(t._s(e.name))])])}))],2):t._e(),t.testimonials.length>0?s("div",{staticClass:"button-container-center"},[s("router-link",{attrs:{to:"/testimonials"}},[t.totalTestimonials>4?s("Button",{attrs:{text:"Browse all testimonials"}}):t._e()],1)],1):t._e()])]),s("section",{staticClass:"contact-area no-parallax"},[t._m(2),t._m(3),s("div",{staticClass:"container"},[s("h1",{staticClass:"section-heading"},[t._v("Send us a message")]),s("div",{staticClass:"form-container"},[s("div",{attrs:{id:"contact"}}),s("form",{on:{submit:function(e){return e.preventDefault(),t.sendMessage.apply(null,arguments)}}},[s("div",{staticClass:"input-row-two-cols"},[s("div",{staticClass:"input-row"},[s("label",{attrs:{for:"name"}},[t._v("Name")]),s("div",{staticClass:"input-input"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.message.name,expression:"message.name",modifiers:{trim:!0}}],class:{"input-invalid":t.messageSettings.nameError},attrs:{maxlength:t.messageSettings.nameMax,type:"text",id:"name",placeholder:"Name"},domProps:{value:t.message.name},on:{blur:[function(e){t.messageSettings.nameError=!1},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.message,"name",e.target.value.trim())}}}),s("i",{directives:[{name:"show",rawName:"v-show",value:0!==t.message.name.length,expression:"message.name.length !== 0"}],staticClass:"input-clear fas fa-times",on:{click:function(e){t.message.name=""}}})])]),s("div",{staticClass:"input-row"},[s("label",{attrs:{for:"phone"}},[t._v("Phone")]),s("div",{staticClass:"input-input"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.message.phone,expression:"message.phone",modifiers:{trim:!0}}],class:{"input-invalid":t.messageSettings.phoneError},attrs:{type:"tel",pattern:"[0-9]{10}",id:"phone",placeholder:"Phone number"},domProps:{value:t.message.phone},on:{blur:[function(e){t.message.phone=t.message.phone.replaceAll(" ",""),t.messageSettings.phoneError=!1},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.message,"phone",e.target.value.trim())}}}),s("i",{directives:[{name:"show",rawName:"v-show",value:0!==t.message.phone.length,expression:"message.phone.length !== 0"}],staticClass:"input-clear fas fa-times",on:{click:function(e){t.message.phone=""}}})])])]),s("div",{staticClass:"input-row"},[s("label",{attrs:{for:"email"}},[t._v("E-mail")]),s("div",{staticClass:"input-input"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.message.email,expression:"message.email",modifiers:{trim:!0}}],class:{"input-invalid":t.messageSettings.emailError},attrs:{maxlength:t.messageSettings.emailMax,type:"mail",id:"email",placeholder:"We'll use this email provided here if we can't reach you via phone"},domProps:{value:t.message.email},on:{blur:[function(e){t.messageSettings.emailError=!1},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.message,"email",e.target.value.trim())}}}),s("i",{directives:[{name:"show",rawName:"v-show",value:0!==t.message.email.length,expression:"message.email.length !== 0"}],staticClass:"input-clear fas fa-times",on:{click:function(e){t.message.email=""}}})])]),s("div",{staticClass:"input-row"},[s("label",{attrs:{for:"message"}},[t._v("Message")]),s("div",{staticClass:"input-input"},[s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.message.message,expression:"message.message",modifiers:{trim:!0}}],class:{"input-invalid":t.messageSettings.messageError},attrs:{maxlength:t.messageSettings.messageMax,id:"message",rows:"6",placeholder:"What is in your mind?"},domProps:{value:t.message.message},on:{blur:[function(e){t.messageSettings.messageError=!1},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.message,"message",e.target.value.trim())}}}),s("i",{directives:[{name:"show",rawName:"v-show",value:0!==t.message.message.length,expression:"message.message.length !== 0"}],staticClass:"input-clear fas fa-times",on:{click:function(e){t.message.message=""}}})]),s("p",[t._v(t._s(t.message.message.length)+" / "+t._s(t.messageSettings.messageMax))])]),s("div",{staticClass:"input-row submit-row"},[s("p",{directives:[{name:"show",rawName:"v-show",value:t.messageSettings.error,expression:"messageSettings.error"}],staticClass:"input-error-p"},[t._v("All fields must be filled in")]),s("input",{class:{"button-disabled":t.messageSettings.buttonDisabled},attrs:{type:"submit"},domProps:{value:t.messageSettings.buttonText}})])])]),t._m(4)])])])],1)},T=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"parallax",attrs:{id:"parallax-main-image"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"text-center main-title"},[s("h1",[t._v("Wabi Sabi Design")]),s("p",[t._v("A beautiful room means a beautiful mind")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"figure-container figure1"},[s("div",{staticClass:"f1"}),s("div",{staticClass:"f2"}),s("div",{staticClass:"f3"}),s("div",{staticClass:"f4"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"figure-container figure2"},[s("div",{staticClass:"g1"}),s("div",{staticClass:"g2"}),s("div",{staticClass:"g3"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"figure-container figure3"},[s("div",{staticClass:"mc"},[s("div",{staticClass:"upper"},[s("div",{staticClass:"c1"})]),s("div",{staticClass:"lower"},[s("div",{staticClass:"c2"})]),s("div",{staticClass:"l1"}),s("div",{staticClass:"l2"}),s("div",{staticClass:"l3"}),s("div",{staticClass:"l4"})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-center"},[t._v("Or you can always reach out to us using the good old methods")]),s("div",{staticClass:"contact-methods"},[s("div",{staticClass:"method"},[s("i",{staticClass:"fas fa-phone-alt"}),s("p",[t._v("+40 740 558 361")])]),s("div",{staticClass:"method"},[s("i",{staticClass:"fas fa-envelope"}),s("p",[t._v("office.wabis@gmail.com")])])])])}],L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{class:t.buttonClass},[t._v(t._s(t.text))])},A=[],U={name:"ButtonComponent",props:{text:String,buttonClass:Array}},O=U,D=(0,g.Z)(O,L,A,!1,null,"5b05857c",null),Z=D.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"full-screen-image"},[s("i",{staticClass:"close-full-screen fas fa-times",on:{click:function(e){return t.$emit("handleCloseFullScreenImage")}}}),s("div",{staticClass:"previous",on:{click:function(e){return t.prev()}}},[s("i",{staticClass:"fas fa-angle-left"})]),s("img",{attrs:{src:t.images[t.dataIndex]}}),s("div",{staticClass:"next",on:{click:function(e){return t.next()}}},[s("i",{staticClass:"fas fa-angle-right"})]),s("p",{staticClass:"total"},[t._v(t._s(t.text))])])},B=[],z={name:"FullScreenImageComponent",props:{index:Number,images:Array},data(){return{dataIndex:this.index}},methods:{prev(){this.dataIndex-=1,this.dataIndex<0&&(this.dataIndex=this.images.length-1)},next(){this.dataIndex+=1,this.dataIndex>=this.images.length&&(this.dataIndex=0)}},computed:{text(){return`${this.dataIndex+1} / ${this.images.length}`}}},R=z,W=(0,g.Z)(R,F,B,!1,null,"5c683f72",null),V=W.exports,q={name:"MainView",components:{Button:Z,FullScreenImage:V},data(){return{imageSelectedIndex:-1,loggedIn:!1,notification:{isError:!1,message:""},messageSettings:{buttonDisabled:!1,buttonText:"Send",nameMax:32,phoneMax:10,emailMax:64,messageMax:200,nameError:!1,phoneError:!1,emailError:!1,messageError:!1,error:!1,result:""},message:{name:"",phone:"",email:"",message:""},totalTestimonials:0,testimonials:[],steps:[{_id:"9A09zZaL",title:"Surveying",description:"Traveling to the location and performing the measurements",icon:"fas fa-fw fa-map-marker-alt"},{_id:"PAL9ufaL",title:"2D projection",description:"Plan, snapshots, technical drawing, electrical plan",icon:"fas fa-fw fa-square"},{_id:"ZAs9ufaL",title:"3D projection",description:"Photorealistic images - 4/5 plane renderings",icon:"fas fa-fw fa-cube"},{_id:"PA01ufaL",title:"Project management",description:"Shopping list, store recomandations",icon:"fas fa-fw fa-tasks"},{_id:"LA09ufaD",title:"Site assistance",description:"",icon:"fas fa-fw fa-hands-helping"}],images:[],totalProjects:0,projects:[]}},async mounted(){try{const t=await r().get("/api/public/projects");this.projects=t.data.projects,this.projects.forEach((t=>{this.images=[...this.images,...t.images]})),this.images=this.images.slice(0,4);const e=await r().get("/api/public/testimonials");this.testimonials=e.data.testimonials.slice(0,4),this.totalTestimonials=e.data.testimonials.length}catch(t){console.log(t)}},methods:{validateField(t,e){""===t&&(this.messageSettings[e]=!0,this.messageSettings.error=!0)},async sendMessage(){if(this.messageSettings.error=!1,this.validateField(this.message.name,"nameError"),this.validateField(this.message.phone,"phoneError"),this.validateField(this.message.email,"emailError"),this.validateField(this.message.message,"messageError"),!this.messageSettings.error)try{this.messageSettings.buttonDisabled=!0,this.messageSettings.buttonText="Sending...";const t=await r().post("/api/public/send-message",this.message);this.$store.dispatch("setNotification",{isError:!1,text:t.data.message}),this.message.name="",this.message.phone="",this.message.email="",this.message.message=""}catch(t){this.$store.dispatch("setNotification",{isError:!0,text:t.message})}finally{this.messageSettings.buttonDisabled=!1,this.messageSettings.buttonText="Send"}}},computed:{getRating(){var t=0;return this.testimonials.forEach((e=>{t+=e.rating})),(t/this.testimonials.length).toFixed(2)},getRatingPercentage(){return Math.round(this.getRating/5*100)}}},H=q,Y=(0,g.Z)(H,M,T,!1,null,"5cf2f960",null),G=Y.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loaded?s("div",{staticClass:"view-container"},[-1!==t.imageSelectedIndex?s("FullScreenImage",{attrs:{images:t.option.selected.images,index:t.imageSelectedIndex},on:{handleCloseFullScreenImage:function(e){t.imageSelectedIndex=-1}}}):t._e(),s("div",{staticClass:"projects-container"},[t._m(0),s("div",{staticClass:"select-box"},[s("div",{staticClass:"options-container",class:{active:t.option.active&&!t.canEdit}},[t.loggedIn?s("div",{staticClass:"option",on:{click:t.newProject}},[s("input",{staticClass:"radio",attrs:{type:"radio",name:"project"}}),s("label",{attrs:{for:"default"}},[t._v("New project")])]):t._e(),s("div",{staticClass:"option",class:{"option-selected":"All"==t.option.selected.title},on:{click:t.viewAll}},[s("input",{staticClass:"radio",attrs:{type:"radio",name:"project"}}),s("label",{attrs:{for:"default"}},[t._v("All")])]),t._l(t.projects,(function(e,i){return s("div",{key:i,staticClass:"option",class:{"option-selected":i==t.option.index,"text-overflow":t.loggedIn},on:{click:function(s){return t.selectOption(e,i)}}},[s("input",{staticClass:"radio",attrs:{type:"radio",id:e.title,name:"project"}}),s("label",{attrs:{for:"default"}},[t._v(t._s(e.title))]),t.loggedIn?s("i",{staticClass:"delete-project fas fa-trash",on:{click:function(s){return s.stopPropagation(),t.deleteProject(e._id)}}}):t._e()])}))],2),s("div",{staticClass:"selected-container"},[s("div",{staticClass:"selected",on:{click:function(e){t.option.active=!t.option.active}}},[s("input",{ref:"project",staticClass:"input-edit-project",class:{"text-overflow-input":t.loggedIn},attrs:{disabled:!t.canEdit,type:"text"},domProps:{value:t.option.selected.title},on:{click:function(t){t.stopPropagation()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editProject.apply(null,arguments)}}}),t.loggedIn&&t.option.selected&&"All"!=t.option.selected.title&&!t.canEdit?s("i",{staticClass:"edit-project fas fa-pen",on:{click:function(e){return e.stopPropagation(),t.editProjectClicked()}}}):t._e()]),t.canEdit?s("div",{staticClass:"action"},[s("div",{staticClass:"action-main"},[t._v(" Editing ")]),s("div",{staticClass:"action-buttons"},[s("Button",{class:["button-action","primary"],attrs:{text:"Save"},nativeOn:{click:function(e){return t.editProject.apply(null,arguments)}}}),s("Button",{class:["button-action"],attrs:{text:"Cancel"},nativeOn:{click:function(e){return t.cancelEdit.apply(null,arguments)}}})],1)]):t._e()])]),null!==t.option.selected?s("div",{staticClass:"gallery-container"},[t.loggedIn&&!t.canEdit&&null!==t.option.selected&&"All"!=t.option.selected.title&&t.option.selected.images.length>0?s("div",{staticStyle:{"padding-bottom":"1rem",display:"flex","align-items":"center",gap:"1rem"}},[s("Button",{class:["button-action","critical"],attrs:{text:t.deleteImagesClicked?"Delete images":"Select images to delete"},nativeOn:{click:function(e){return t.deleteImages.apply(null,arguments)}}}),t.deleteImagesClicked?s("Button",{class:["button-action"],attrs:{text:"Cancel"},nativeOn:{click:function(e){t.deleteImagesClicked=!1,t.imagesSelected=[]}}}):t._e(),t.imagesSelected.length>0?s("span",[t._v(t._s(t.imagesSelected.length)+" / "+t._s(t.option.selected.images.length))]):t._e()],1):t._e(),t.isNewProject||0!=t.option.selected.images.length?t._e():s("div",{staticClass:"no-images"},[t._m(1)]),t.imagesToUpload.length>0?s("div",{staticStyle:{"padding-bottom":"1rem",display:"flex","align-items":"center",gap:"1rem"}},[s("Button",{class:["button-action","good"],attrs:{text:"Upload"},nativeOn:{click:function(e){return t.onUpload.apply(null,arguments)}}}),s("Button",{class:["button-action"],attrs:{text:"Cancel"},nativeOn:{click:function(e){t.imagesToUpload=[],t.imagesToUploadServer=[]}}})],1):t._e(),t.isNewProject?s("div",[s("h1",{staticClass:"text-center"},[t._v("Save the project then upload the photos")])]):s("div",{staticClass:"gallery"},[t.loggedIn&&"All"!=t.option.selected.title?s("div",{staticClass:"image-container add-new-project",on:{click:t.addNewImagesClicked}},[s("i",{staticClass:"fas fa-plus-circle"}),s("form",{attrs:{enctype:"multipart/form-data"}},[s("input",{ref:"images",staticClass:"pick-images",attrs:{multiple:"",accept:"image/*",type:"file"},on:{change:t.onFilesSelected}})])]):t._e(),t._l(t.imagesToUpload,(function(e,i){return s("div",{key:i,staticClass:"image-container preview"},[s("div",{staticClass:"cta"},[s("i",{staticClass:"remove-from-upload fas fa-ban",on:{click:function(e){t.imagesToUpload.splice(i,1),t.imagesToUploadServer.splice(i,1)}}}),s("span",[t._v("New")])]),e.invalidMessage?s("div",{staticClass:"img-overlay"},[s("div",[s("p",[t._v("This image won't be uploaded")]),s("p",[t._v(t._s(e.invalidMessage))])])]):t._e(),s("img",{attrs:{src:e.preview}})])})),t._l(t.option.selected.images,(function(e,i){return s("div",{key:i+"a",staticClass:"image-container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.imagesSelected,expression:"imagesSelected"}],class:{visible:t.deleteImagesClicked},attrs:{type:"checkbox"},domProps:{value:e,checked:Array.isArray(t.imagesSelected)?t._i(t.imagesSelected,e)>-1:t.imagesSelected},on:{change:function(s){var i=t.imagesSelected,a=s.target,n=!!a.checked;if(Array.isArray(i)){var o=e,r=t._i(i,o);a.checked?r<0&&(t.imagesSelected=i.concat([o])):r>-1&&(t.imagesSelected=i.slice(0,r).concat(i.slice(r+1)))}else t.imagesSelected=n}}}),s("img",{attrs:{src:e},on:{click:function(e){return t.selectImage(i)}}})])}))],2)]):t._e()])],1):t._e()},K=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"projects-heading"},[s("h1",{staticClass:"text-center"},[t._v("Projects")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("i",{staticClass:"fas fa-image"}),s("p",[t._v("Well, this is awkward, there are no images yet")])])}],Q=(s(6699),s(2196)),X=s.n(Q),tt={name:"ProjectsView",components:{FullScreenImage:V,Button:Z},props:{project:Object},data(){return{loaded:!1,imagesToUpload:[],imagesToUploadServer:[],deleteImagesClicked:!1,imagesSelected:[],isNewProject:!1,selectedImage:null,canEdit:!1,option:{active:!1,selected:null,index:-1},imageSelectedIndex:-1}},methods:{async deleteImages(){if(this.deleteImagesClicked){this.option.selected.images=this.option.selected.images.filter((t=>!this.imagesSelected.includes(t)));try{const t=await r().patch("/api/admin/projects",{id:this.option.selected._id,title:this.option.selected.title,images:this.option.selected.images});this.$store.dispatch("updateProject",t.data.project),this.$store.dispatch("setNotification",{error:t.data.isError,text:t.data.message}),this.deleteImagesClicked=!1}catch(t){console.log(t)}}else this.deleteImagesClicked=!0;this.imagesSelected=[]},cancelEdit(){this.option.active=!1,this.canEdit=!1,this.isNewProject&&(this.option.selected=null,this.option.index=-1,this.isNewProject=!1,this.viewAll())},editProjectClicked(){this.canEdit=!0},async editProject(){if(this.option.selected.title=document.querySelector(".input-edit-project").value,this.isNewProject)try{const t=await r().post("/api/admin/projects",this.option.selected);this.$store.dispatch("addProject",t.data.project),this.$store.dispatch("setNotification",{error:t.data.isError,text:t.data.message}),this.option.selected=t.data.project}catch(t){console.log(t)}else try{const t=await r().patch("/api/admin/projects",{id:this.option.selected._id,title:this.option.selected.title,images:this.option.selected.images});this.$store.dispatch("updateProject",t.data.project),this.$store.dispatch("setNotification",{error:t.data.isError,text:t.data.message})}catch(t){console.log(t)}this.canEdit=!1,this.isNewProject=!1},async deleteProject(t){if(confirm("Are you sure you want to delete this project?"))try{const e=await r()["delete"](`/api/admin/projects/${t}`);this.$store.dispatch("deleteProject",t),this.$store.dispatch("setNotification",{error:e.data.isError,text:e.data.message}),this.viewAll()}catch(e){console.log(e),this.$store.dispatch("setNotification",{error:!0,text:e.response.data.error})}},viewAll(){var t=[];this.projects.forEach((e=>{t=[...t,...e.images]})),this.option={active:!1,selected:{title:"All",images:t},index:-1}},newProject(){this.imagesToUploadServer=[],this.imagesToUpload=[],this.imagesSelected=[],this.option={active:!0,selected:{title:`New project ${this.projects.length}`,images:[]},index:0},this.isNewProject=!0,setTimeout((()=>{document.querySelector(".edit-project").click()}),1)},selectOption(t,e){this.imagesToUploadServer=[],this.imagesToUpload=[],this.deleteImagesClicked=!1,this.imagesSelected=[],this.isNewProject=!1,this.option.active=!1,this.option.selected=t,this.option.index=e},selectImage(t){this.imageSelectedIndex=t},addNewImagesClicked(){document.querySelector(".pick-images").click()},onFilesSelected(){this.imagesToUploadServer=[...this.imagesToUploadServer,...this.$refs.images.files],this.imagesToUpload=[...this.imagesToUpload,...X().map(this.$refs.images.files,(t=>({name:t.name,size:t.size,type:t.type,preview:URL.createObjectURL(t),invalidMessage:this.validateImage(t)})))]},validateImage(t){const e=1e6,s=["image/jpeg","image/png"];return t.size>e?`Max size allowed: ${e/1e6} MB`:s.includes(t.type)?"":"Not an image"},async onUpload(){const t=new FormData;t.append("projectId",this.option.selected._id),X().forEach(this.imagesToUploadServer,(e=>{""==this.validateImage(e)&&t.append("images",e)}));try{const e=await r().post("/api/admin/upload",t);this.$store.dispatch("updateProject",e.data.project),this.$store.dispatch("setNotification",{isError:!1,text:e.data.message}),this.imagesToUploadServer=[],this.imagesToUpload=[]}catch(e){this.$store.dispatch("setNotification",{isError:!0,text:e.response.data.error})}}},async mounted(){try{const t=await r().get("/api/public/projects");this.$store.dispatch("setProjects",t.data.projects)}catch(t){this.loaded=!1}this.viewAll(),this.loaded=!0},computed:{loggedIn(){return this.$store.getters.getLoggedIn},projects(){return this.$store.getters.getProjects}}},et=tt,st=(0,g.Z)(et,J,K,!1,null,"ad63880a",null),it=st.exports,at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"view-container"},[t.loading?s("div",{staticClass:"loader-container"},[s("span",{staticClass:"loader"})]):s("div",{staticClass:"testimonials"},[s("h1",[t._v("Testimonials")]),s("div",{staticClass:"rating"},[s("h1",[t._v(t._s(t.getRating))]),s("div",{staticClass:"stars-outer"},[s("div",{staticClass:"stars-inner",style:"width: "+t.getRatingPercentage+"%;"})])]),0==t.testimonials.length?s("div",[s("h1",[t._v("😭 There are no testimonials yet 😭")])]):t._e(),s("div",{staticClass:"grid-container"},t._l(t.testimonials,(function(e,i){return s("div",{key:i,staticClass:"testimonial"},[s("div",{staticStyle:{display:"flex","flex-direction":"column",gap:".5rem"}},[s("span",{staticStyle:{"font-size":".9rem",color:"rgb(170, 170, 170)"}},[t._v(t._s(e.name))]),s("div",[t._l(e.rating,(function(t){return s("i",{key:e._id+"-"+t,staticClass:"fas fa-star",staticStyle:{color:"#f8ce0b"}})})),t._v(" "+t._s(e.rating)+" ")],2),s("p",[t._v(t._s(e.body))])]),s("div",[s("p",{staticStyle:{"font-size":".75rem",color:"rgb(170, 170, 170)"}},[t._v(t._s(t.getDate(e.createdAt)))])])])})),0)])])},nt=[],ot={name:"TestimonialsView",data(){return{loading:!1,testimonials:[]}},async mounted(){this.loading=!0;try{const t=await r().get("/api/public/testimonials");this.testimonials=t.data.testimonials,console.log(t)}catch(t){this.$store.dispatch("setNotification",{isError:!0,text:t.response.data.error})}finally{this.loading=!1}},methods:{getDate(t){return new Date(t).toLocaleString("ro-RO").split(",")[0]}},computed:{getRating(){var t=0;this.testimonials.forEach((e=>{t+=e.rating}));const e=(t/this.testimonials.length).toFixed(2);return isNaN(e)?"":e},getRatingPercentage(){return Math.round(this.getRating/5*100)}}},rt=ot,lt=(0,g.Z)(rt,at,nt,!1,null,"44f4b960",null),ct=lt.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loaded?s("div",{staticClass:"view-container"},[t.valid?s("div",{staticClass:"write-testimonial"},[s("h1",{staticClass:"text-center"},[t._v("Your opinion is very valuable to us")]),s("div",{staticClass:"testimonial-textarea"},[s("div",{staticClass:"input-row"},[s("label",{attrs:{for:"name"}},[t._v("Name")]),s("div",{staticClass:"input-input"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.testimonial.name,expression:"testimonial.name",modifiers:{trim:!0}}],attrs:{maxlength:"32",type:"text",id:"name",placeholder:"Name"},domProps:{value:t.testimonial.name},on:{input:function(e){e.target.composing||t.$set(t.testimonial,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("i",{directives:[{name:"show",rawName:"v-show",value:0!==t.testimonial.name.length,expression:"testimonial.name.length !== 0"}],staticClass:"input-clear fas fa-times",on:{click:function(e){t.testimonial.name=""}}})])]),s("div",{staticClass:"input-row"},[s("label",{attrs:{for:"name"}},[t._v("Message")]),s("div",{staticClass:"input-input"},[s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.testimonial.body,expression:"testimonial.body",modifiers:{trim:!0}}],attrs:{maxlength:"100",rows:"4",placeholder:"Write your short opinion here"},domProps:{value:t.testimonial.body},on:{input:function(e){e.target.composing||t.$set(t.testimonial,"body",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("i",{directives:[{name:"show",rawName:"v-show",value:0!==t.testimonial.body.length,expression:"testimonial.body.length !== 0"}],staticClass:"input-clear fas fa-times",on:{click:function(e){t.testimonial.body=""}}})]),s("p",[t._v(t._s(t.testimonial.body.length)+" / "+t._s(t.messageMax))])])]),s("div",{staticClass:"stars-container"},[s("div",{staticClass:"stars"},t._l(5,(function(e){return s("i",{key:e,staticClass:"fas fa-star",class:{active:e<=t.testimonial.rating},on:{click:function(s){t.testimonial.rating=e}}})})),0),s("div",{staticClass:"emoji"},[s("p",[t._v(t._s(t.emoji[t.testimonial.rating]))])])]),s("div",[s("Button",{attrs:{disabled:""==t.testimonial.name||""==t.testimonial.message||0==t.testimonial.rating,text:t.buttonText},nativeOn:{click:function(e){return t.sendTestimonial.apply(null,arguments)}}})],1)]):s("div",{staticClass:"not-valid"},[s("h1",[t._v(t._s(t.errorMessage))])])]):t._e()},mt=[],gt={name:"WriteTestimonialView",components:{Button:Z},data(){return{loaded:!1,valid:!1,emoji:["🤔","😭","😩","😶","🙂","🥰"],errorMessage:"",testimonial:{name:"",body:"",rating:0,token:this.$route.params.token},messageMax:100,buttonDisabled:!0}},methods:{async sendTestimonial(){try{const t=await r().post("/api/public/post-testimonial",this.testimonial);this.$store.dispatch("setNotification",{isError:!1,text:t.data.message}),this.valid=!1,this.errorMessage=t.data.additionalMessage}catch(t){this.$store.dispatch("setNotification",{isError:!0,text:t.response.data.error})}}},async mounted(){try{await r().get("/api/public/check-testimonial-token",{params:{token:this.$route.params.token}}),this.valid=!0}catch(t){this.valid=!1,this.errorMessage=t.response.data.error}finally{this.loaded=!0}},computed:{buttonText(){return""==this.testimonial.name?"Please fill in your name":""==this.testimonial.body?"Please fill in your message":0==this.testimonial.rating?"Please pick a rating":"Submit"}}},pt=gt,ut=(0,g.Z)(pt,dt,mt,!1,null,"1f38649f",null),ht=ut.exports,vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"admin-container"},[s("div",{staticClass:"admin-main-container"},[s("div",{staticClass:"left-panel"},[s("h1",{staticClass:"admin-h1 text-center"},[t._v("Admin")]),s("div",{staticClass:"admin-menu"},[s("p",{class:{active:0==t.selected},on:{click:function(e){t.loading=!1,t.getMessages(),t.selected=0}}},[s("i",{staticClass:"fas fa-fw fa-envelope"}),t._v("Messages")]),s("p",{class:{active:1==t.selected},on:{click:function(e){t.loading=!1,t.selected=1}}},[s("i",{staticClass:"fas fa-fw fa-star"}),t._v("Create testimonial")])])]),s("div",{staticClass:"right-panel"},[0==t.selected?s("div",{staticClass:"messages-container"},[s("h1",[t._v("Messages")]),t.loading?s("div",{staticClass:"loader-container"},[s("span",{staticClass:"loader"})]):t._e(),0==t.messages.length?s("p",[t._v("There are no messages")]):t._e(),t._l(t.messages,(function(e){return s("div",{key:e._id,staticClass:"message-container"},[s("div",{staticClass:"message"},[s("p",{staticStyle:{color:"#aaa","font-size":".8rem","margin-bottom":".5rem"}},[t._v(t._s(e.name)+" ("+t._s(e.phone)+"), "+t._s(t.getMessageDate(e.createdAt)))]),t._l(t.getMessage(e.message),(function(e,i){return s("p",{key:i},[t._v(t._s(e))])})),s("p",{staticStyle:{color:"#aaa","font-size":".8rem","margin-top":".5rem"}},[t._v(t._s(e.email))])],2)])}))],2):t._e(),1==t.selected?s("div",{staticClass:"create-testimonial"},[s("h1",[t._v("Create testimonial")]),""===t.link?s("div",[s("Button",{class:["button-action","good"],attrs:{text:"Generate link"},nativeOn:{click:function(e){return t.generateLink.apply(null,arguments)}}})],1):t._e(),t.loading?s("div",{staticClass:"loader-container"},[s("span",{staticClass:"loader"})]):t._e(),""!==t.link?s("div",{staticClass:"input-result"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.link,expression:"link"}],ref:"link",staticStyle:{"padding-right":"4rem"},attrs:{readonly:"",type:"text"},domProps:{value:t.link},on:{input:function(e){e.target.composing||(t.link=e.target.value)}}}),s("i",{staticClass:"fas fa-copy",on:{click:t.copy}})]):t._e(),""!==t.link?s("p",[t._v("Send this link to your client")]):t._e()]):t._e()])])])},ft=[],_t={name:"AdminView",components:{Button:Z},data(){return{loading:!1,selected:-1,optionTitle:"",link:"",messages:[]}},methods:{copy(){navigator.clipboard.writeText(this.link),this.$store.dispatch("setNotification",{isError:!1,text:"Link copied to clipboard"})},async generateLink(){this.loading=!0;try{const t=await r().get("/api/admin/create-testimonial",{params:{date:Date.now()}});this.link=`${window.location.origin}/testimonial/${t.data.token}`}catch(t){this.$router.push("/"),this.$store.dispatch("setLoggedIn",!1),this.$store.dispatch("setNotification",{isError:!0,text:"Please log in again to continue your operations"})}finally{this.loading=!1}},async getMessages(){this.loading=!0;try{const t=await r().get("/api/admin/messages");this.messages=t.data.messages}catch(t){this.$store.dispatch("setNotification",{isError:!0,text:t.response.data.error})}finally{this.loading=!1}},getMessageDate(t){return new Date(t).toLocaleString("ro-RO").split(",")[0]},getMessage(t){return t.split("\n")}},mounted(){0==this.$store.getters.getLoggedIn&&this.$router.push("/unauthorized")}},Ct=_t,wt=(0,g.Z)(Ct,vt,ft,!1,null,"4c7eaece",null),xt=wt.exports,yt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},bt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"unauthorized"},[s("div",{staticStyle:{position:"relative","z-index":"10"}},[s("h1",[t._v("👮‍♂️ Stop right there!")]),s("p",[t._v("You don't have access to this resource")])])])}],kt={name:"UnauthorizedView"},jt=kt,St=(0,g.Z)(jt,yt,bt,!1,null,"e1de5b70",null),$t=St.exports,Et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"not-found"},[s("div",{staticStyle:{position:"relative","z-index":"10"}},[s("h1",[t._v("4😰4")]),s("p",[t._v("Oops! Page cannot be found")]),s("router-link",{staticClass:"rl",attrs:{to:"/"}},[t._v("Back to main page")])],1)])},Pt=[],It={name:"NotFoundView"},Nt=It,Mt=(0,g.Z)(Nt,Et,Pt,!1,null,"4da06564",null),Tt=Mt.exports;i.Z.use(N.Z);const Lt=[{path:"/",name:"Home",component:G},{path:"/projects",name:"Projects",component:it},{path:"/testimonials",name:"Testimonials",component:ct},{path:"/testimonial/:token",name:"Write a testimonial",component:ht},{path:"/admin",name:"Admin",component:xt},{path:"/unauthorized",name:"Unauthorized",component:$t},{path:"*",name:"Not found",component:Tt}],At=new N.Z({mode:"history",routes:Lt});At.beforeEach(((t,e,s)=>{document.title=`WSD - ${t.name}`,s()}));var Ut=At,Ot=s(4665);i.Z.use(Ot.ZP);var Dt=new Ot.ZP.Store({state:{loggedIn:!1,showLoginModal:!1,notification:{isError:!1,text:""},projects:[]},mutations:{setLoggedIn:(t,e)=>{t.loggedIn=e},setProjects:(t,e)=>{t.projects=e},setShowLoginModal:(t,e)=>{t.showLoginModal=e},setNotification:(t,e)=>{t.notification.isError=e.isError,t.notification.text=e.text},addProject:(t,e)=>{t.projects.unshift(e)},updateProject:(t,e)=>{console.log(e);const s=t.projects.find((t=>t._id==e._id));s.title=e.title,s.images=e.images},deleteProject:(t,e)=>{const s=t.projects.map((t=>t._id)).indexOf(e);t.projects.splice(s,1)},deleteImages:(t,e)=>{const s=t.projects.find((t=>t._id==e._id));s.images=s.images.filter((t=>!e.images.includes(t)))}},actions:{setLoggedIn:(t,e)=>{t.commit("setLoggedIn",e)},setProjects:(t,e)=>{t.commit("setProjects",e)},setShowLoginModal:(t,e)=>{t.commit("setShowLoginModal",e)},setNotification:(t,e)=>{t.commit("setNotification",e)},addProject:(t,e)=>{t.commit("addProject",e)},updateProject:(t,e)=>{t.commit("updateProject",e)},deleteProject:(t,e)=>{t.commit("deleteProject",e)},deleteImages:(t,e)=>{t.commit("deleteImages",e)}},getters:{getLoggedIn:t=>t.loggedIn,getShowLoginModal:t=>t.showLoginModal,getNotification:t=>t.notification,getProjects:t=>t.projects}});i.Z.config.productionTip=!1,new i.Z({render:t=>t(I),router:Ut,store:Dt}).$mount("#app")}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var n=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=t,function(){var t=[];s.O=function(e,i,a,n){if(!i){var o=1/0;for(d=0;d<t.length;d++){i=t[d][0],a=t[d][1],n=t[d][2];for(var r=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(s.O).every((function(t){return s.O[t](i[l])}))?i.splice(l--,1):(r=!1,n<o&&(o=n));if(r){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[i,a,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,n,o=i[0],r=i[1],l=i[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)var d=l(s)}for(e&&e(i);c<o.length;c++)n=o[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(d)},i=self["webpackChunkclient"]=self["webpackChunkclient"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(230)}));i=s.O(i)})();
//# sourceMappingURL=app.bf337f93.js.map